<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>ShakeCast</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" media="screen" href="./css/proui.css" />
<link rel="stylesheet" media="screen" href="./css/mapapp.css" />
<link href="./css/tango/skin.css" rel="stylesheet" type="text/css" />
		<style type="text/css" title="currentStyle"> 
			@import "./css/jquery-ui-1.8.16.custom.css";
			@import "./css/demo_table.css";
		</style> 
        <link rel="stylesheet" href="css/bootstrap.css">
    <link href="css/docs.css" rel="stylesheet">
        <link rel="shortcut icon" href="/images/sc_logo.png">
        <style>
            body {
                padding-top: 60px;
                padding-bottom: 40px;margin:0px;
            }
			.logo{ 
				vertical-align: text-bottom;
				text-align: center;
				height: 24px;
			}
			html { overflow-y: scroll; height: 300%; font-size: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
			table { clear: both }
			 .GREEN { background-color: #008800; }
			 .YELLOW { background-color: #eeee00; }
			 .ORANGE { background-color: #ee9900; }
			 .RED { background-color: #cc0000; }
			 .NA { background-color: #888888; }
			 .GREY { background-color: #888888; }
			.accordion h3 { padding-left: 2em; }
.fac_summary {
	border-bottom: 1px solid #888;
    text-align: left;
}
.fac_summary:nth-child(odd) {
	background-color: #eeeeee;
}

#caption {
	background-color: #eee;
	position: relative;
}

.metric
{
    margin:10px;
    padding:5px;	
	height: 50px;
	border: 1px solid #888;
	font-size: 80%;
}

.histogram
{
    position:relative;
    margin:5px;
    padding:5px;	
	height: 75px;
	border-bottom: 1px solid #888;
   background:#eee;
	font-size: 70%;
	width: 175px;
}

.histogram li
{
    position:absolute;
   list-style:none;
   background:lightblue;
   width:30px;
   text-align:center;
   visibility: hidden;
-moz-box-shadow:    3px 3px 5px 6px #ccc;
  -webkit-box-shadow: 1px #ccc;
  box-shadow:         1px 1px 1px 1px #ccc;
}

.thumbnailClass{ text-align: center; }

       </style>
        <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="themes/default/default.css" type="text/css" media="screen" />

        <script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <div class="nav-collapse collapse">
                        <ul class="nav">
				<li class="logo"><a class="brand" href="#"><img src="/images/sc_logo.png" class="img-circle logo" /> ShakeCast</a></li>
                            <li class="active"><a href="#">Home</a></li>
                            <li><a href="#about">About</a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Earthquake List <b class="caret"></b></a>
                                <ul class="dropdown-menu">
									<li><a href="list.html">Recent Events</a></li>
                                    <li class="divider"></li>
									<li><a href="list.html?type=major">Significant Events</a></li>
									<li><a href="list.html?type=scenario">Scenarios</a></li>
                                    <li class="divider"></li>
                                    <li><a href="#">Settings</a></li>
                                </ul>
                            </li>
                            <li><a href="admin/index.html">Administration</a></li>
                        </ul>
                        <form class="navbar-form pull-right">
                            <input class="span2" type="text" placeholder="Email">
                            <input class="span2" type="password" placeholder="Password">
                            <button type="submit" class="btn">Sign in</button>
                        </form>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>

        <!--/.nav-collapse <div class="container">-->
<div class="container-fluid">

            <!-- Main hero unit for a primary marketing message or call to action -->
            <div class="hero-unit" style="padding: 30px;">
				<div id="map_title"></div>
				<div id="map_canvas" style="width:800px; height:400px;"></div>
 				<div id="caption"></div>
		<button id="fullscreen" class="btn">Enter Fullscreen Mode</button>
            </div>


            <!-- Example row of columns -->
            <div class="row">
                <div class="span4">
                    <h3>ShakeMap Archive</h3>
                    <p>ShakeMap is a product of the U.S. Geological Survey Earthquake Hazards Program in conjunction with regional seismic network operators. ShakeMap sites provide near-real-time maps of ground motion and shaking intensity following significant earthquakes. These maps are used by federal, state, and local organizations, both public and private, for post-earthquake response and recovery, public and scientific information, as well as for preparedness exercises and disaster planning.</p>
                    <p><a class="btn" href="list.html">View Archive &raquo;</a> <a class="btn" href="list.html?type=scenario">View Scenario &raquo;</a></p>
                </div>
                <div class="span4">
                    <h3>Scientific Background</h3>
                    <p>
					ShakeCast, short for ShakeMap Broadcast, is a fully automated, freely-available open-source system for delivering specific ShakeMap products to critical users and for triggering established post-earthquake response protocols.
                     <br>
                     <br>
					ShakeCast allows utilities, transportation agencies, and other large organizations to automatically determine the shaking value at their facilities, set thresholds for notification of damage states (typically green, yellow, and red) for each facility and then automatically notify (via pager, cell phone, or email) specified operators, inspectors, and others within their organizations responsible for those particular facilities in order to prioritize inspection and response.
                    <p><a class="btn" href="#">View details &raquo;</a></p>
                     </p>
                </div>
                <div class="span4">
                    <h3>Product Formats</h3>
                    <p>
					<a class="btn btn-large btn-block" type="button"  href="http://earthquake.usgs.gov/research/shakemap/formats.php"><i class="icon-info-sign"></i> ShakeMap Product Formats</a>
    <blockquote>
    <p class="lead">ShakeCast Product Formats</p>
					    <dl>
						<dt>Facility List</dt>
						<dd>
						A table of earthquake and station parameters, formatted to be read easily by humans. An XML formatted file is also available, and is the best option for parsing the information by computer. 
						The station information includes name and/or code, location coordinates, and peak velocity and acceleration values.
						</dd>
						</dl>
					</p>
    </blockquote>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
                <div class="span4">
                    <h3>Related Resources</h3>
                    <p>
					<a class="btn btn-large btn-block" type="button"  href="http://earthquake.usgs.gov/research/shakemap/"><i class="icon-info-sign"></i> ShakeMap Research Project</a>
					<a class="btn btn-large btn-block btn-primary" type="button"  href="https://www.sciencebase.gov/confluence/display/ShakeCast/Home"><i class="icon-folder-open icon-white"></i> ShakeCast Wiki</a>
					</p>
                </div>
            </div>

			<div id="spinner" class="spinner ui-widget ui-widget-content ui-corner-all" style="width:50px;background:#fff;height:50px;">
				<img id="img-spinner" src="/images/usgs.gif" alt="Loading" style="margin:10px auto;"/>
			</div>

        </div> <!-- /container -->
		
    <!-- Footer
    ================================================== -->
    <footer class="footer">
      <div class="container">
        <ul class="footer-links">
          <li><a href="http://earthquake.usgs.gov">&copy; USGS 2013</a></li>
          <li class="muted">&middot;</li>
          <li>Desktop</li>
          <li class="muted">&middot;</li>
          <li><a href="http://localhost/html/h5bp/multiple.html">Console</a></li>
          <li class="muted">&middot;</li>
          <li><a href="http://localhost/html/mobile.html">Mobile</a></li>
        </ul>
     </div>
    </footer>
		
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="js/jquery-ui.js"></script>

        <script src="js/vendor/bootstrap.min.js"></script>

    <script type="text/javascript" src="./js/jquery.fullscreen-min.js"></script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>
        <script src="js/spin.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="js/shakemap.js" type="text/javascript"></script>
<script src="js/loadXML.js" type="text/javascript"></script>
<script type="text/javascript" src="js/mapapp_list.js"></script>

	<script>
		var map;
		var fac_des = [];
		var mmi = ["I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX", "X+"];
		var product_type = {'INFO_XML':1, 'INTEN_JPG':1, 'PGA_JPG':1, 'PGV_JPG':1, 
			'PSA03_JPG':1, 'PSA10_JPG':1, 'PSA30_JPG':1, 'STN_XML':1,};
		var bar = {'GREEN':'bar-success', 'YELLOW':'bar-warning', 'RED':'bar-danger'};
		var event_ind;
		var display_ind=0;
		var max_list = 5;
		var event_array = [];
		
	$(window).load(function() {

		map = MAPAPP.init();
			//google.maps.event.trigger(map, 'resize');
		$(window).trigger('resize');
	 
		refresh_list();
		setInterval(switch_sm, 30000);
		setInterval(refresh_list, 60000);
	
	});
		
	function refresh_list(){ 
		//var sm_url = '/scripts/shakemap.pl/from_id/' + sc_id;
		var sm_url = '/scripts/event.pl/event_list';

		$.getJSON(sm_url, function(data) {

			// Are there even any EQ to display?
			if (data.length <= 0) {
				return;
			}
			
			var eqTable = [];
			event_ind = data.length;
			event_array = data.slice();
			for (var i=0; i < data.length; i++) {
			//MAPAPP.addMarker(data.facility_damage[key]);
			var event = data[i];
			event.opacity = 1-i/data.length;
			MAPAPP.addMarker(event);
			}
			
			if (display_ind == 0) switch_sm();
		});

	}			
			
	function switch_sm(){ 
		display_ind ++;
		if (display_ind >= event_ind) {display_ind = 0;}
		var event = event_array[display_ind];
		var shakemap = event.shakemap_id + '-' + event.shakemap_version;
		var dmg_url = '/scripts/damage.pl/from_id/'+shakemap+'?action=summary';
		google.maps.event.trigger(MAPAPP.facMarkers[event.event_id], 'click');
		map.setCenter(MAPAPP.facMarkers[event.event_id].getPosition());
	}			
			
	$(window).resize(function() {
		//$("#eq_content_table").width($(".row").width());
		$("#map_canvas").width($(".hero-unit").width());
		if ($(".hero-unit").fullScreen()) {
		$("#map_canvas").height($(".hero-unit").height()-40);
		} else {
		$("#map_canvas").height(($("#map_canvas").width())/2);
		}
		//console.log($("#map_canvas").width());
		google.maps.event.trigger(map, 'resize');
		var cont_height = $("#map_canvas").height() + $(".row").height();
		$('html').css('height', cont_height+ 300);
	});
		
	$(document).ready(function(){
		$("#spinner").bind("ajaxStart", function() {
			$(this).show();
		}).bind("ajaxStop", function() {
			$(this).hide();
		}).bind("ajaxError", function() {
			$(this).hide();
		});

		 });

$('#fullscreen').on('click', function() {
	var elem = $(".hero-unit");
	  elem.fullScreen(true);
    });
	
    </script>
    </body>
</html>
