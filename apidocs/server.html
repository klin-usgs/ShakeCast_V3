

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Server Documentation &mdash; pyCast 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="pyCast 1 documentation" href="index.html"/>
        <link rel="next" title="CLI Documentation" href="cli.html"/>
        <link rel="prev" title="Database API" href="db.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pyCast
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="app.html">Starting ShakeCast</a></li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="db.html">Database API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Server Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-app.server">Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-app.task">Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-app.newthread">New_Thread</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI Documentation</a></li>
<li class="toctree-l1"><a class="reference external" href=".. _Python: http://www.python.org/">.. _Python: http://www.python.org/</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">pyCast</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Server Documentation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/server.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="server-documentation">
<h1>Server Documentation<a class="headerlink" href="#server-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-app.server">
<span id="server"></span><h2>Server<a class="headerlink" href="#module-app.server" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="app.server.Server">
<em class="property">class </em><code class="descclassname">app.server.</code><code class="descname">Server</code><a class="headerlink" href="#app.server.Server" title="Permalink to this definition">¶</a></dt>
<dd><p>The ShakeCast server is essentially the &#8220;conductor&#8221; of the system.
It keeps track of which functions (Tasks) are supposed to run and
when. It provides an API that can be utilized through the CLI
and eventually the GUI.</p>
<div class="highlight-python"><div class="highlight"><pre>API: {&#39;name_of_task&#39;: {&#39;func&#39;: name_of_function,
                       &#39;loop&#39;: True/False,
                       &#39;interval&#39;: int (duration between looping runs),
                       &#39;args_in&#39;: kwargs,
                       &#39;db_use&#39;: True/False}}
</pre></div>
</div>
<p>name_of_function must be a function in the functions module or a
method of the Server</p>
<dl class="method">
<dt id="app.server.Server.check_task">
<code class="descname">check_task</code><span class="sig-paren">(</span><em>task=  new_task(id: None</em>, <em>arguments: None</em>, <em>loop: False</em>, <em>interval: 100</em>, <em>db_use: False) status: stopped</em><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.check_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the output from a finished task and determines whether
the task should be removed from the queue</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.cleanup">
<code class="descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove tasks that have completed their work and the connections
associated with them</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.handle_client">
<code class="descname">handle_client</code><span class="sig-paren">(</span><em>conn=None</em>, <em>addr=None</em><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.handle_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Run when a connection has been extablished. Looking for a
message through the connected socket</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.info">
<code class="descname">info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns what the server is &#8216;doing&#8217;. Can be used to send the UI
info about the server</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.log">
<code class="descname">log</code><span class="sig-paren">(</span><em>message=''</em>, <em>which=''</em><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs a message to either the shakecast or server log</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.loop">
<code class="descname">loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the server loop, and contains the code that is looped by
the server</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.make_print">
<code class="descname">make_print</code><span class="sig-paren">(</span><em>add_str</em><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.make_print" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new string onto the output string from the server. It
loops at 15 lines for the print statement</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.queue_check">
<code class="descname">queue_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.queue_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for tasks that are ready to be run and finished tasks
that can be removed</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.shutdown">
<code class="descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Shuts down the server allowing currently running tasks to
finish</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.socket_check">
<code class="descname">socket_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.socket_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if any connections have been established</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.socket_setup">
<code class="descname">socket_setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.socket_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects the server to a specific socket</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop server loop; It will be restarted immediately. This
functionality could be used to reload functions in the event
of an update</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.stop_shakecast">
<code class="descname">stop_shakecast</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.stop_shakecast" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the Tasks associated with ShakeCast services from the
queue if they are stopped and stops them from running again if
they are currently running</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.stop_task">
<code class="descname">stop_task</code><span class="sig-paren">(</span><em>task_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.stop_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a looping task&#8217;s status to &#8216;Finished&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.talk">
<code class="descname">talk</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.talk" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a monitoring message from the server</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.ui_exit">
<code class="descname">ui_exit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.ui_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if the server should shutdown when the UI exits</p>
</dd></dl>

<dl class="method">
<dt id="app.server.Server.user_in">
<code class="descname">user_in</code><span class="sig-paren">(</span><em>data=None</em>, <em>conn=None</em><span class="sig-paren">)</span><a class="headerlink" href="#app.server.Server.user_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpret the message that is received by the server</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-app.task">
<span id="task"></span><h2>Task<a class="headerlink" href="#module-app.task" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="app.task.Task">
<em class="property">class </em><code class="descclassname">app.task.</code><code class="descname">Task</code><span class="sig-paren">(</span><em>name='new_task'</em>, <em>task_id=None</em>, <em>func=None</em>, <em>conn=None</em>, <em>args_in=None</em>, <em>loop=False</em>, <em>interval=100</em>, <em>run_in=0</em>, <em>kill_time=None</em>, <em>db_use=False</em>, <em>use_pdb=False</em><span class="sig-paren">)</span><a class="headerlink" href="#app.task.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Task objects are used to simplify running specific functions with
specific conditions. A Task is an object that track of a function
and the parameters under which it should be run. This is an easy
way to put functions in a queue and let them run later.</p>
</dd></dl>

</div>
<div class="section" id="module-app.newthread">
<span id="new-thread"></span><h2>New_Thread<a class="headerlink" href="#module-app.newthread" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="app.newthread.New_Thread">
<em class="property">class </em><code class="descclassname">app.newthread.</code><code class="descname">New_Thread</code><span class="sig-paren">(</span><em>func</em>, <em>args_in=None</em>, <em>loop=False</em>, <em>loop_time=5</em>, <em>use_pdb=False</em><span class="sig-paren">)</span><a class="headerlink" href="#app.newthread.New_Thread" title="Permalink to this definition">¶</a></dt>
<dd><p>A New_Thread is built from a threading.thread with the added
functionality of looping and intuitive argument passing</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="go">&gt;&gt;&gt;new_thread = New_Thread(func=func, args_in=kwargs)</span>
<span class="go">&gt;&gt;&gt;new_thread.start()</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="app.newthread.New_Thread.daemon">
<code class="descname">daemon</code><a class="headerlink" href="#app.newthread.New_Thread.daemon" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean value indicating whether this thread is a daemon thread (True) or not (False).</p>
<p>This must be set before start() is called, otherwise RuntimeError is
raised. Its initial value is inherited from the creating thread; the
main thread is not a daemon thread and therefore all threads created in
the main thread default to daemon = False.</p>
<p>The entire Python program exits when no alive non-daemon threads are
left.</p>
</dd></dl>

<dl class="attribute">
<dt id="app.newthread.New_Thread.ident">
<code class="descname">ident</code><a class="headerlink" href="#app.newthread.New_Thread.ident" title="Permalink to this definition">¶</a></dt>
<dd><p>Thread identifier of this thread or None if it has not been started.</p>
<p>This is a nonzero integer. See the thread.get_ident() function. Thread
identifiers may be recycled when a thread exits and another thread is
created. The identifier is available even after the thread has exited.</p>
</dd></dl>

<dl class="method">
<dt id="app.newthread.New_Thread.isAlive">
<code class="descname">isAlive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.newthread.New_Thread.isAlive" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether the thread is alive.</p>
<p>This method returns True just before the run() method starts until just
after the run() method terminates. The module function enumerate()
returns a list of all alive threads.</p>
</dd></dl>

<dl class="method">
<dt id="app.newthread.New_Thread.is_alive">
<code class="descname">is_alive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.newthread.New_Thread.is_alive" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether the thread is alive.</p>
<p>This method returns True just before the run() method starts until just
after the run() method terminates. The module function enumerate()
returns a list of all alive threads.</p>
</dd></dl>

<dl class="method">
<dt id="app.newthread.New_Thread.join">
<code class="descname">join</code><span class="sig-paren">(</span><em>timeout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#app.newthread.New_Thread.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait until the thread terminates.</p>
<p>This blocks the calling thread until the thread whose join() method is
called terminates &#8211; either normally or through an unhandled exception
or until the optional timeout occurs.</p>
<p>When the timeout argument is present and not None, it should be a
floating point number specifying a timeout for the operation in seconds
(or fractions thereof). As join() always returns None, you must call
isAlive() after join() to decide whether a timeout happened &#8211; if the
thread is still alive, the join() call timed out.</p>
<p>When the timeout argument is not present or None, the operation will
block until the thread terminates.</p>
<p>A thread can be join()ed many times.</p>
<p>join() raises a RuntimeError if an attempt is made to join the current
thread as that would cause a deadlock. It is also an error to join() a
thread before it has been started and attempts to do so raises the same
exception.</p>
</dd></dl>

<dl class="attribute">
<dt id="app.newthread.New_Thread.name">
<code class="descname">name</code><a class="headerlink" href="#app.newthread.New_Thread.name" title="Permalink to this definition">¶</a></dt>
<dd><p>A string used for identification purposes only.</p>
<p>It has no semantics. Multiple threads may be given the same name. The
initial name is set by the constructor.</p>
</dd></dl>

<dl class="method">
<dt id="app.newthread.New_Thread.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.newthread.New_Thread.run" title="Permalink to this definition">¶</a></dt>
<dd><p>The function that is run when new_thread.start() is called</p>
</dd></dl>

<dl class="method">
<dt id="app.newthread.New_Thread.start">
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.newthread.New_Thread.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the thread&#8217;s activity.</p>
<p>It must be called at most once per thread object. It arranges for the
object&#8217;s run() method to be invoked in a separate thread of control.</p>
<p>This method will raise a RuntimeError if called more than once on the
same thread object.</p>
</dd></dl>

<dl class="method">
<dt id="app.newthread.New_Thread.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#app.newthread.New_Thread.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop a looping thread</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cli.html" class="btn btn-neutral float-right" title="CLI Documentation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="db.html" class="btn btn-neutral" title="Database API" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Daniel Slosky.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>